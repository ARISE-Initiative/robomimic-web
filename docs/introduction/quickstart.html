

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Getting Started &mdash; robomimic 0.2.0 documentation</title>
  

  
  <link rel="stylesheet" href="../static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../static/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../static/documentation_options.js"></script>
        <script src="../static/jquery.js"></script>
        <script src="../static/underscore.js"></script>
        <script src="../static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Features Overview" href="features.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> robomimic
          

          
          </a>

          
            
            
              <div class="version">
                0.2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#training-models">Training Models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#run-a-quick-example">Run a quick example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ways-to-launch-training-runs">Ways to launch training runs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#using-a-config-json-preferred">Using a config json (preferred)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#constructing-a-config-object-in-code">Constructing a config object in code</a></li>
<li class="toctree-l4"><a class="reference internal" href="#directly-modifying-the-config-class-source-code-avoid-this">Directly modifying the config class source code (avoid this)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#viewing-training-results">Viewing Training Results</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#logs-models-and-rollout-videos">Logs, Models, and Rollout Videos</a></li>
<li class="toctree-l3"><a class="reference internal" href="#evaluating-trained-policies">Evaluating Trained Policies</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Features Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Working with robomimic Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="datasets.html">Using Demonstration Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="model_zoo.html">Using the Model Zoo</a></li>
<li class="toctree-l1"><a class="reference internal" href="results.html">Reproducing Study Results</a></li>
</ul>
<p class="caption"><span class="caption-text">Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/dataset.html">SequenceDataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/observations.html">Observations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/algorithms.html">Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/models.html">Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/configs.html">Configs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/environments.html">Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/utils.html">Utils</a></li>
</ul>
<p class="caption"><span class="caption-text">Source API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/robomimic.html">robomimic package</a></li>
</ul>
<p class="caption"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../miscellaneous/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../miscellaneous/contributing.html">Contributing Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../miscellaneous/team.html">Team</a></li>
<li class="toctree-l1"><a class="reference internal" href="../miscellaneous/acknowledgments.html">Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../miscellaneous/references.html">Projects using robomimic</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">robomimic</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Getting Started</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../sources/introduction/quickstart.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p>This section discusses how to get started with the robomimic repository, by providing examples of how to train and evaluate models.</p>
<div class="section" id="training-models">
<h2>Training Models<a class="headerlink" href="#training-models" title="Permalink to this headline">¶</a></h2>
<p>This section discusses how models can be trained.</p>
<p><strong>Note:</strong> These examples <a class="reference external" href="./installation.html#robosuite">require robosuite</a> to be installed, but they can run without robosuite by disabling rollouts in <code class="docutils literal notranslate"><span class="pre">robomimic/configs/base_config.py</span></code>, <code class="docutils literal notranslate"><span class="pre">robomimic/exps/templates/bc.json</span></code>, and <code class="docutils literal notranslate"><span class="pre">examples/train_bc_rnn.py</span></code>.</p>
<div class="section" id="run-a-quick-example">
<h3>Run a quick example<a class="headerlink" href="#run-a-quick-example" title="Permalink to this headline">¶</a></h3>
<p>To see a quick example of a training run, along with the outputs, run the <code class="docutils literal notranslate"><span class="pre">train_bc_rnn.py</span></code> script in the <code class="docutils literal notranslate"><span class="pre">examples</span></code> folder (the <code class="docutils literal notranslate"><span class="pre">--debug</span></code> flag is used to ensure the training run only takes a few seconds).</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ python train_bc_rnn.py --debug
</pre></div>
</div>
<p>The default dataset used is the one in <code class="docutils literal notranslate"><span class="pre">tests/assets/test.hdf5</span></code> and the default directory where results are saved for the example training run is in <code class="docutils literal notranslate"><span class="pre">tests/tmp_model_dir</span></code>. Both can be overridden by passing arguments to the above script.</p>
<p><strong>Warning:</strong> If you are using the default dataset (and rollouts are enabled), please make sure that robosuite is on the <code class="docutils literal notranslate"><span class="pre">offline_study</span></code> branch of robosuite.</p>
<p>After the script finishes, you can check the training outputs in the output directory (<code class="docutils literal notranslate"><span class="pre">tests/tmp_model_dir/bc_rnn_example</span></code> by default). See the “Viewing Training Results” section below for more information on interpreting the output.</p>
</div>
<div class="section" id="ways-to-launch-training-runs">
<h3>Ways to launch training runs<a class="headerlink" href="#ways-to-launch-training-runs" title="Permalink to this headline">¶</a></h3>
<p>In this section, we describe the different ways to launch training runs.</p>
<div class="section" id="using-a-config-json-preferred">
<h4>Using a config json (preferred)<a class="headerlink" href="#using-a-config-json-preferred" title="Permalink to this headline">¶</a></h4>
<p>One way is to use the <code class="docutils literal notranslate"><span class="pre">train.py</span></code> script, and pass a config json via the <code class="docutils literal notranslate"><span class="pre">--config</span></code> argument. The dataset can be specified by setting the <code class="docutils literal notranslate"><span class="pre">data</span></code> attribute of the <code class="docutils literal notranslate"><span class="pre">train</span></code> section of the config json, or specified via the <code class="docutils literal notranslate"><span class="pre">--dataset</span></code> argument. The example below runs a default template json for the BC algorithm. <strong>This is the preferred way to launch training runs.</strong></p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ python train.py --config ../exps/templates/bc.json --dataset ../../tests/assets/test.hdf5
</pre></div>
</div>
<p>Please see the <a class="reference external" href="./advanced.html#using-the-hyperparameter-helper-to-launch-runs">hyperparameter helper docs</a> to see how to easily generate json configs for launching training runs.</p>
</div>
<div class="section" id="constructing-a-config-object-in-code">
<h4>Constructing a config object in code<a class="headerlink" href="#constructing-a-config-object-in-code" title="Permalink to this headline">¶</a></h4>
<p>Another way to launch a training run is to make a default config (with a line like <code class="docutils literal notranslate"><span class="pre">config</span> <span class="pre">=</span> <span class="pre">config_factory(algo_name=&quot;bc&quot;)</span></code>), modify the config in python code, and then call the train function, like in the <code class="docutils literal notranslate"><span class="pre">examples/train_bc_rnn.py</span></code> script.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">robomimic</span>
<span class="kn">import</span> <span class="nn">robomimic.utils.torch_utils</span> <span class="k">as</span> <span class="nn">TorchUtils</span>
<span class="kn">from</span> <span class="nn">robomimic.config</span> <span class="kn">import</span> <span class="n">config_factory</span>
<span class="kn">from</span> <span class="nn">robomimic.scripts.train</span> <span class="kn">import</span> <span class="n">train</span>

<span class="c1"># make default BC config</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">config_factory</span><span class="p">(</span><span class="n">algo_name</span><span class="o">=</span><span class="s2">&quot;bc&quot;</span><span class="p">)</span>

<span class="c1"># set config attributes here that you would like to update</span>
<span class="n">config</span><span class="o">.</span><span class="n">experiment</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;bc_rnn_example&quot;</span>
<span class="n">config</span><span class="o">.</span><span class="n">train</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;/path/to/dataset.hdf5&quot;</span>
<span class="n">config</span><span class="o">.</span><span class="n">train</span><span class="o">.</span><span class="n">output_dir</span> <span class="o">=</span> <span class="s2">&quot;/path/to/desired/output_dir&quot;</span>
<span class="n">config</span><span class="o">.</span><span class="n">train</span><span class="o">.</span><span class="n">batch_size</span> <span class="o">=</span> <span class="mi">256</span>
<span class="n">config</span><span class="o">.</span><span class="n">train</span><span class="o">.</span><span class="n">num_epochs</span> <span class="o">=</span> <span class="mi">500</span>
<span class="n">config</span><span class="o">.</span><span class="n">algo</span><span class="o">.</span><span class="n">gmm</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="kc">False</span>

<span class="c1"># get torch device</span>
<span class="n">device</span> <span class="o">=</span> <span class="n">TorchUtils</span><span class="o">.</span><span class="n">get_torch_device</span><span class="p">(</span><span class="n">try_to_use_cuda</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># launch training run</span>
<span class="n">train</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">device</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="directly-modifying-the-config-class-source-code-avoid-this">
<h4>Directly modifying the config class source code (avoid this)<a class="headerlink" href="#directly-modifying-the-config-class-source-code-avoid-this" title="Permalink to this headline">¶</a></h4>
<p>Technically, a third way to launch a training run is to directly modify the relevant <code class="docutils literal notranslate"><span class="pre">Config</span></code> classes (such as <code class="docutils literal notranslate"><span class="pre">config/bc_config.py</span></code> and <code class="docutils literal notranslate"><span class="pre">config/base_config.py</span></code>) and then run <code class="docutils literal notranslate"><span class="pre">train.py</span></code> but <strong>this is not recommended</strong>, especially if using the codebase with version control (e.g. git). Modifying these files modifies the default settings, and it’s easy to forget that these changes were made, or unintentionally commit these changes so that they become the new defaults. For this reason, <strong>we recommend never modifying the config classes directly, unless you are modifying an algorithm and adding new config keys</strong>.</p>
<p>To learn more about the <code class="docutils literal notranslate"><span class="pre">Config</span></code> class, read the <a class="reference external" href="../modules/configs.html">Configs documentation</a>, or look at the source code.</p>
</div>
</div>
</div>
<div class="section" id="viewing-training-results">
<h2>Viewing Training Results<a class="headerlink" href="#viewing-training-results" title="Permalink to this headline">¶</a></h2>
<p>This section discusses how to view and interpret the results of training runs.</p>
<div class="section" id="logs-models-and-rollout-videos">
<h3>Logs, Models, and Rollout Videos<a class="headerlink" href="#logs-models-and-rollout-videos" title="Permalink to this headline">¶</a></h3>
<p>Training runs will output results to the directory specified by <code class="docutils literal notranslate"><span class="pre">config.train.output_dir</span></code>, under a folder with the experiment name (specified by <code class="docutils literal notranslate"><span class="pre">config.experiment.name</span></code>). This folder contains a directory named by a timestamp (e.g. <code class="docutils literal notranslate"><span class="pre">20210708174935</span></code>) for every training run with this same name, and within that directory, there should be three folders - <code class="docutils literal notranslate"><span class="pre">logs</span></code>, <code class="docutils literal notranslate"><span class="pre">models</span></code>, and <code class="docutils literal notranslate"><span class="pre">videos</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">logs</span></code> directory will contain everything printed to stdout in <code class="docutils literal notranslate"><span class="pre">log.txt</span></code> (only if <code class="docutils literal notranslate"><span class="pre">config.experiment.logging.terminal_output_to_txt</span></code> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>), and a <code class="docutils literal notranslate"><span class="pre">tb</span></code> folder containing tensorboard logs (only if <code class="docutils literal notranslate"><span class="pre">config.experiment.logging.log_tb</span></code> is set to True). You can visualize the tensorboard results by using a command like the below, and then opening the link printed on the terminal in a web browser. The tensorboard logs have convenient sections for rollout evaluations, quantities logged during training, quantities logged during validation, and timing statistics for different parts of the training process (in minutes).</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ tensorboard --logdir /path/to/output/dir --bind_all
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">models</span></code> directory contains saved model checkpoints. These can be used by the <code class="docutils literal notranslate"><span class="pre">run_trained_agent.py</span></code> script (more on this below). The <code class="docutils literal notranslate"><span class="pre">config.experiment.save</span></code> portion of the config controls if and when models are saved during training.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">videos</span></code> directory contains evaluation rollout videos collected during training, when evaluating trained models in the environment (only if <code class="docutils literal notranslate"><span class="pre">config.experiment.render_video</span></code> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>). The <code class="docutils literal notranslate"><span class="pre">config.experiment.rollout</span></code> portion of the config controls how often rollouts happen, and how many happen.</p>
</div>
<div class="section" id="evaluating-trained-policies">
<h3>Evaluating Trained Policies<a class="headerlink" href="#evaluating-trained-policies" title="Permalink to this headline">¶</a></h3>
<p>Saved policy checkpoints in the <code class="docutils literal notranslate"><span class="pre">models</span></code> directory can be evaluated using the <code class="docutils literal notranslate"><span class="pre">run_trained_agent.py</span></code> script. The below example can be used to evaluate a policy with 50 rollouts of maximum horizon 400 and save the rollouts to a video. The agentview and wrist camera images are used to render video frames.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ python run_trained_agent.py --agent /path/to/model.pth --n_rollouts <span class="m">50</span> --horizon <span class="m">400</span> --seed <span class="m">0</span> --video_path /path/to/output.mp4 --camera_names agentview robot0_eye_in_hand 
</pre></div>
</div>
<p>The 50 agent rollouts can also be written to a new dataset hdf5.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>python run_trained_agent.py --agent /path/to/model.pth --n_rollouts <span class="m">50</span> --horizon <span class="m">400</span> --seed <span class="m">0</span> --dataset_path /path/to/output.hdf5 --dataset_obs 
</pre></div>
</div>
<p>Instead of storing the observations, which can consist of high-dimensional images, they can be excluded by omitting the <code class="docutils literal notranslate"><span class="pre">--dataset_obs</span></code> flag. The observations can be extracted using the <code class="docutils literal notranslate"><span class="pre">dataset_states_to_obs.hdf5</span></code> script (see the Datasets documentation for more information on this).</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>python run_trained_agent.py --agent /path/to/model.pth --n_rollouts <span class="m">50</span> --horizon <span class="m">400</span> --seed <span class="m">0</span> --dataset_path /path/to/output.hdf5
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="features.html" class="btn btn-neutral float-right" title="Features Overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Ajay Mandlekar, Danfei Xu, Josiah Wong, Soroush Nasiriany, Chen Wang.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>